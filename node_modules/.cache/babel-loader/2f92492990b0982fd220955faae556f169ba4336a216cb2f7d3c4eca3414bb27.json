{"ast":null,"code":"import{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Reroute}from'../components/Reroute';import{useAuthContext}from'../hooks/useAuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Create=()=>{const{user}=useAuthContext();Reroute();const[title,setTitle]=useState('');const[img,setImg]=useState('');const[picture,setPicture]=useState(null);const[description,setDescription]=useState('');const[youtube,setYoutube]=useState('');const[body,setBody]=useState('');const[loading,setLoading]=useState('');const navigate=useNavigate();const handleSubmit=e=>{const username=user.username;e.preventDefault();setLoading('Posting...');const project={title,img,description,body,youtube,username};fetch('https://projmanage-api.onrender.com/api/projects',{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(project)}).then(()=>{setLoading('Posted!');navigate('/');});};const convertToBase64=e=>{return new Promise((resolve,reject)=>{var reader=new FileReader();reader.onload=()=>{resolve(reader.result);};reader.onerror=error=>{reject(error);};if(e.target.files&&e.target.files.length>0){reader.readAsDataURL(e.target.files[0]);}else{reject(\"No file selected\");}});};useEffect(()=>{console.log(picture);},[picture]);return/*#__PURE__*/_jsxs(\"div\",{className:\"create\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create a Project\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:title,onChange:e=>setTitle(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Image (300x300 Recommended):\"}),/*#__PURE__*/_jsx(\"input\",{id:\"select-Img\",type:\"file\",required:true,value:picture,onChange:async e=>{setPicture(e.target.value);convertToBase64(e).then(result=>{setImg(result);});},style:{height:'20px'},accept:\"image/png, image/gif, image/jpeg\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description-label\",required:true,value:description,onChange:e=>setDescription(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"Body:\"}),/*#__PURE__*/_jsx(\"textarea\",{required:true,value:body,onChange:e=>setBody(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"YouTube Embed Link (Optional):\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description-label\",value:youtube,onChange:e=>setYoutube(e.target.value),placeholder:\"(e.g. https://www.youtube.com/embed/some_link)\"}),loading!=='Posting...'&&/*#__PURE__*/_jsx(\"button\",{children:\"Create\"}),/*#__PURE__*/_jsx(\"text\",{id:\"create-loading\",children:loading})]})]});};export default Create;","map":{"version":3,"names":["useState","useEffect","useNavigate","Reroute","useAuthContext","jsx","_jsx","jsxs","_jsxs","Create","user","title","setTitle","img","setImg","picture","setPicture","description","setDescription","youtube","setYoutube","body","setBody","loading","setLoading","navigate","handleSubmit","e","username","preventDefault","project","fetch","method","headers","JSON","stringify","then","convertToBase64","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","target","files","length","readAsDataURL","console","log","className","children","onSubmit","type","required","value","onChange","id","style","height","accept","placeholder"],"sources":["/Users/alexnham/Desktop/cs/mern/ProjManage/frontend/src/pages/Create.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Reroute } from '../components/Reroute';\nimport { useAuthContext } from '../hooks/useAuthContext';\n\n\nconst Create = () => {\n    const { user } = useAuthContext()\n    Reroute();\n    const [title, setTitle] = useState('');\n    const [img, setImg] = useState('');\n    const [picture, setPicture] = useState(null);\n    const [description, setDescription] = useState('');\n    const [youtube, setYoutube] = useState('');\n    const [body, setBody] = useState('');\n    const [loading, setLoading] = useState('');\n    const navigate = useNavigate()\n\n  \n\n    const handleSubmit = (e) => {\n        const username = user.username\n        e.preventDefault();\n        setLoading('Posting...');\n        const project = {title,img,description,body,youtube,username};\n        fetch('https://projmanage-api.onrender.com/api/projects', {\n            method: 'POST',\n            headers: { \"Content-Type\": \"application/json\"},\n            body: JSON.stringify(project)\n        }).then(() => {\n            setLoading('Posted!');\n            navigate('/');\n        })\n    }\n\n    const convertToBase64 = (e) => {\n        return new Promise((resolve, reject) => {\n            var reader = new FileReader();\n        \n            reader.onload = () => {\n              resolve(reader.result);\n            };\n        \n            reader.onerror = (error) => {\n              reject(error);\n            };\n        \n            if (e.target.files && e.target.files.length > 0) {\n              reader.readAsDataURL(e.target.files[0]);\n            } else {\n              reject(\"No file selected\");\n            }\n          });\n        };\n\n\n    useEffect(() => {\n        console.log(picture);\n          }, [picture]);\n        \n   \n    return (\n        <div className=\"create\">\n        <h2>Create a Project</h2>\n        <form onSubmit={handleSubmit}>\n            <label>Title:</label>\n            <input \n                type=\"text\"\n                required   \n                value={title}\n                onChange={(e)=> setTitle(e.target.value)}\n            ></input>\n            <div>\n            <label>Image (300x300 Recommended):</label>\n            <input \n                id=\"select-Img\"\n                type=\"file\"\n                required   \n                value={picture}\n                onChange={async (e) => {\n                    setPicture(e.target.value);\n                    convertToBase64(e)\n                        .then((result) => {\n                            setImg(result)\n                        });\n                  }\n                }\n                style={{height:'20px'}}\n                accept=\"image/png, image/gif, image/jpeg\"\n            ></input>\n            {}\n            </div>\n             <label>Description:</label>\n            <textarea \n                id=\"description-label\"\n                required \n                value={description}\n                onChange={(e)=> setDescription(e.target.value)}           \n            ></textarea>\n             <label>Body:</label>\n            <textarea\n                required     \n                value={body}\n                onChange={(e)=> setBody(e.target.value)}       \n            ></textarea>\n             <label>YouTube Embed Link (Optional):</label>\n            <textarea \n                id=\"description-label\"\n                value={youtube}\n                onChange={(e)=> setYoutube(e.target.value)}\n                placeholder=\"(e.g. https://www.youtube.com/embed/some_link)\"\n            ></textarea>\n           {loading !== 'Posting...' && <button>Create</button>}\n           <text id=\"create-loading\">{ loading }</text>\n        </form>\n        </div>\n    );\n}\nexport default Create\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}